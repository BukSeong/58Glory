### 零 绪论
>第零部分是纪念部分，只想了解游戏规则的读者可以跳过。
#### 0.1 创立与发展
#### 0.2 游戏理念
#### 0.3 传播范围与变式
#### 0.4 历史意义

### 一 流程
#### 1.1 游戏开始
当玩家准备好地图后，游戏开始。游戏开始到第一回合开始进行之间的阶段称作“准备阶段”。
##### 1.1.1 选将
准备阶段初期，双方（以下称作红方、蓝方）各自选择武将，具体流程为：
1. 红方和蓝方同时选择主将，一旦选择，直接确定。如果重复，则双方各自重选，且不能再次选择原来的主将。
2. 红方和蓝方同时禁止对方一个武将，可以相同。
3. 红方和蓝方同时再选择四个武将；如果相同，则双方各自重选，且不能再次选择原来的武将，但可以选择之前因为重复而被禁止的主将。
4. 选完武将后，双方各获得15经济。
##### 1.1.2 选取武器
双方可以消耗一定的经济，为武将选择主武器。每个武将可以持有0~1个主武器。此阶段每个队伍最多持有1个M202。双方均确定主武器后，可以互相查看对方的主武器。
##### 1.1.3 执行技能
一些在准备阶段发动的技能可以在选择主武器后发动，例如DXD的【晋升】技能。
#### 1.2 回合
唔叭荣耀是一款回合制自走棋游戏，每一回合包括己方的回合和对方的回合。在回合中，玩家可以自选顺序操作自己的所有武将，每个武将操作1次。“操作”包括：移动、发动技能、发动攻击、空步和更换主武器。当武将选择一个操作之后，不能再次操作。
##### 1.2.1 移动
“移动”是回合中的一般操作。在一般的区域内，玩家可以向有道路联通的任意方向移动1步（1格或 $\sqrt{2}$ 格）；若位移的起点和终点都在中央区，则可以无视地形进行 $\sqrt{2}$ 格位移；在铁路区域内，玩家可以移动1~2格，或者在铁路与常规区域选择上/下车。
##### 1.2.2 发动技能
武将可以在此期间发动技能，必须按照技能的规则和说明进行，详见下文3.2部分。
##### 1.2.3 发动攻击
武将可以使用主武器对敌人或塔造成伤害，消耗一定的经济。此时，该武将被视为“伤害来源”。需要注意的是，若武将A在铁路内（如在1点），而武将B在铁路外（如在12点），则两个武将不能相互攻击。
##### 1.2.4 空步
武将也可以选择不进行任何操作，称为“空步”。我们将“空步”视为一种操作，因为在对局中巧妙的空步可以最大化地限制对手。
##### 1.2.5 更换主武器
武将可以消耗1步数将主武器交给3步以内的队友，则除非队友同时也消耗1步数将自己的主武器交给该武将，否则该武将将暂时没有主武器。武将也可以在局中某回合消耗1步数和一定经济制备主武器。
##### 1.2.6 不耗步数的操作
不耗步数的操作包括特定技能的发动（以标注为准）以及在经济区获取经济。
在经济区获取经济的规则如下：
1. 若玩家操作武将在经济区中空步或位移的终点在经济区，则该玩家一方获得2经济。地图上有两个经济区，不同经济区的经济可以累加。
2. 若玩家一方有多名武将占据了同一个经济区，则不累加。
3. 若玩家和敌方双方占据了同一个经济区，则各获得1经济。
##### 1.2.7 操作顺序
玩家可以自己决定五名武将的先后操作顺序。玩家应当格外注意，这一顺序有可能造成“溅射”等影响，可能在不经意间改变局势。
#### 1.3 结算
当场上满足以下两条件之一：
1. 某一方所有武将死亡；
2. 某一方两个塔的Hp均小于等于0。
则该玩家判负，对方判胜。
### 二 地图
#### 2.1 图形
唔叭荣耀地图由98个点和点之间的线（通路）组成，如下图所示。
![唔叭荣耀地图](https://github.com/BukSeong/58Glory/blob/main/Campus.png)
其中，黑色区域为普通区域，蓝色区域为中央区，绿框为经济区，紫框为塔，红色区域为铁路区。
#### 2.2 基本概念
为描述方便，将以x为编号的点简称为“点x”或“x点”；将以a点为左上顶点、以b点为右下顶点的矩形记作(a:b)，以a、b点为端点的线段记为(a,b)。
##### 2.2.1 “步”、“格”与 $\sqrt{2}$
由长度为1或 $\sqrt{2}$ 的线段直接相连的两点，视为间隔1步。由最少个数（记为n）的这样的线段首尾相接连起来的两点，视为间隔n步。示例：图中的67点和89点，间隔3步。
两点之间的曼哈顿距离称为“格”。示例：图中的67点和89点，间隔4格。
两点之间由勾股定理算出来的绝对距离，称为“距离”。例如：68和59两点之间的距离是 $sqrt{2}$ 。一般在讨论距离时，不会讨论 $\sqrt{2}$ 以外的无理数。有时在游戏中为了方便，在讨论 $\sqrt{2}$ 时将“距离”和“格”的概念混淆（例如：有时会说点68到点59间隔 $\sqrt{2}$ 格）。
##### 2.2.2 视域
如果两点均属于铁路区或均不属于铁路区，且两点重合或有一条笔直的线段相连，则称其中一点在另一点的视域内。例如：12点在42的视域内，42点在38点的视域内，15点不在16点视域内，6点在1点视域内，6点不在16点视域内。
#### 2.3 特殊区域
##### 2.3.1 中央区
中央区是地图上所有蓝色线段的端点构成的区域，主要是指(34:67)区域内的点。中央区内的战斗决定进攻走向。
##### 2.3.2 经济区
经济区是指图中被绿色方框框住的点，即点23和点78。经济区的占领是游戏前期的关键。
##### 2.3.3 塔区
两队的主塔分别位于82点和19点，HP均为100；副塔分别位于52点和49点，HP均为80。红队“塔区”的定义是区域(52:85)中不属于中央区的所有点，蓝队“塔区”的定义是区域(16:49)中不属于中央区的所有点。所有武将的出生点均位于己方主塔处。塔区是整个队伍的最后一条防线，应当紧密防守。
##### 2.3.4 铁路
铁路是唔叭荣耀地图上的特殊区域。可以将铁路视为独立于地图的“运输系统”。铁路区域包括：线段(1,9)、(20,100)、(92,100)、(1,81)上的所有点。铁路上的点和铁路外的点互不在视域内，互不攻击；以铁路外的某点为中心爆炸的M202或RPG不能溅射到铁路内，反之亦然。铁路区是快速机动的重要区域。

>文档尾加上了用于绘制地图的脚本代码，用于帮助AI理解地图。

### 三 武将
#### 3.1 基本参数
武将的基本参数（属性）有HP、极值、数学等。
##### 3.1.1 HP（健康值）
武将的HP等于初始值记为满血，原则上，不得顶格加血（超过满血）；HP小于或等于0时，武将死亡。武将可以通过发动技能或者使用主武器来扣除敌人的HP，医疗兵通过发动【医疗】技能增加自己或队友的HP。对于一次HP的扣除，将武器使用者/技能发动者视为“伤害来源”。
##### 3.1.2 极值
武将的极值一般仅用于计算【偏移】技能造成的伤害。将极值大于等于7小于等于14的雌性角色称为“极值点”。其中，极值为7或8的是弱极值点，9或10的是强极值点，11\~14的是超极值点。一般地，雌性角色的初始极值为5\~11，雄性角色的初始极值为0~5。武将ZYS由于其独特的【雌偏移】技能而将极值设定为15。特别地，SJK的极值是虚数 $i$ 。这也就意味着他无视极值点【偏移】。
一般地，除特殊技能外，武将的极值在局中无法改变。
##### 3.1.3 数学
武将的数学分为神、巨、强、中、弱五档。常用于判定【数竞】带来的伤害或数学属性医疗兵发动【医疗】的条件。
##### 3.1.4 所属班级
某些技能可能对班级的不同产生不同的效果，如581的【医疗】技能。
#### 3.2 技能
##### 3.2.1 发动条件
技能的发动条件包括发动时机、作用对象、cd、次数限制、经济限制等
技能的发动时机可能在整局游戏开始前的准备阶段（例如：TSD的【晋升】），也可能在回合内（如【偏移】【数竞】等大部分主要技能），还有可能在回合外（如一些被动技能）。在发动条件成立时，被动技能立即发动，主动技能则由玩家决定是否发动。
##### 3.2.2 作用效果
一般地，一个技能的作用效果可以分为以下几类：伤害类、医疗类、属性类、位移类、特效类等。
伤害类是指直接扣除作用对象的HP，同时又分为点对点（如：【偏移】）、点对面（如：【次声】）两类。
医疗类是指恢复作用对象的HP，一般专指【医疗】技能。
属性类是指修改作用对象的属性，例如DXD的【晋升】和【劝人选文】。特别地，有些技能可以改变自己的机动性，也算做对属性的修改。
位移类是指造成作用对象发生额外位移，比较典型的有【足球】、【约谈】和【瞬移】。
技能作用效果与常规游戏规则出现冲突的，一般以技能作用效果为准。
##### 3.3.3 cd（冷却）
为保持游戏平衡，部分技能不能在连续的回合中发动，被标注cd=x（x是一个正整数，一般为1）。cd=x表示从一次发动技能到下一次发动技能之间，必须相隔x个完整的回合。
##### 3.3.4 三种特殊技能
###### 3.3.4.1 极值点偏移
【偏移】是极值点特有的伤害类技能。除特殊标注外，所有极值≥7的雌性角色均拥有技能【偏移】。【偏移】的作用对象仅限视域内的雄性角色，且消耗G*1，cd=1。
偏移造成伤害的计算公式为： $\text{伤害 = 偏移倍数} \times \Delta \text{极值}$
其中， $\Delta 极值$ 的意思是技能发动者的极值减去作用对象的极值。
示例：581在2步处偏移YL：
 $\text{伤害} = 4 \times (11-0) = 44$
###### 3.3.4.2 数竞
【数竞】是一些具有特殊“数学”关联的武将的特有的越视域技能。对于3步内的敌人，若敌人的数学属性满足一定条件（通常是强、中、弱），则可以扣除其一定值HP，参照下文中的数竞类型表。特别地，Al只因翔拥有【误导】技能，虽然和【数竞】的设计逻辑不同，但作用方法和效果相似，所以也归为【数竞】类别当中。
###### 3.3.4.3 医疗
【医疗】是可以恢复己方一名武将HP值的技能。将具有【医疗】技能或其他恢复HP功能的武将称为“医疗兵”。一般地，不同医疗兵的医疗触发条件不同，例如对作用对象的特定属性和身份有一定限制或区分。【医疗】不可以顶格加血，即不可以使得任何武将的HP超过其初始状态；若作用对象的HP与初始HP差值小于【医疗】技能使其HP增加的值，则将该作用对象加至满血（初始HP）。一般地，医疗技能全局限3次，无cd。
##### 3.3.5 具有特殊属性的技能
部分技能可能具有特殊属性，如蒜的【蒜】技能可以放置【蒜】，HJK的技能可能导致其具有特殊的主武器等。这些技能可能改变初始规则，需要格外关注。
### 四 武器
主武器包括M202、RPG、加特林。使用主武器时，武将和作用点必须站在连通的直线上，且消耗一定量的经济，造成一定范围的溅射。“溅射”是指当主武器（M202、RPG）击中作用点时，对与作用点**直接相连**的r<2的点上的武将（包括敌人和队友）都会造成较小的伤害。不要小看这些伤害，在一次战例中，QC凭借5Hp的溅射以一个回合的优势推倒了583把守的塔，获得胜利。
M202是“四联火箭筒”，可以进行对某个点的爆炸伤害（即作用点上的所有武将均会受伤），适合打击中远距离目标。BM配M202几乎无解。制备需要2经济，每次开火需要2经济。会造成较大溅射。
RPG是M202的平替，可以进行对某个点的爆炸伤害，打击中距离目标性价比极高。医疗兵或者辅助型武将适合拿这一类武器。制备需要1经济，每次开火需要1经济。会造成较小溅射。
加特林是机枪，只能进行一对一伤害，打击近距离或贴脸敌人威力极大，且极省经济。缺点是缺乏远程有效保护。一些坦克或者极强的机动兵，如YL、SJK或者thraa，非常适合配加特林。
### 五 高阶操作
>本部分是提升玩家游戏操作水平的指南。对于理解游戏规则而言，读者可以跳过这一部分。

### 六 参数对照表
#### 6.1 武将-参数-技能表
> 道路连通:指两点间有线连接
- ↓表1 武将-参数-技能表↓
- 
|武将|HP|极值|数学|班级/身份|技能|
|---|---|---|---|---|---|
| Birdman | 110 | 5 | 强 | 5 |【制导】```使用RPG/M202打击3步以内的敌人时，弹道可以转钝角或直角弯```，**cd=1**|
| LYJ | 125 | 2 | 神 | 5 |【数竞】B类，**cd=1**|
| 581 | 100 | 11 | 弱 | 6 | 【医疗】对**当前存活**的```5班角色+45,强极值点+15,其他人+30``` ，**全局限3次** |
| 582 | 100 | 11 | 中 |```其他班学生```| 【瞬移】 **全局限2次**，**cd=1** |
| 583 | 100 | 10 | 强 | 6 | 【次声】对 $r<2$ 且**道路连通**的所有**敌对武将**产生r=0```40```r=1```30```r= $\sqrt{2}$ ```20```伤害 |
| YR | 150 | 0 | 弱 |```5教师```| 【约谈】**（不占步数）**可在```所有己方武将行动之前```对上一回合对自己造成伤害的**任意敌对**武将约谈到 $r<=1$ 且**道路连通**的任意地点|
| DXD | 135 | 2 | 弱 |```5外教师```|【晋升】```第一回合前对己方一武将使用,使其数学+1/极值+2```【劝人选文】```对3步内一敌对武将使用,使其数学-1,极值+1```**全局限3次**|
| Fakeflower| 100 | 6 | 巨 |```5教师```|【医疗】对**当前存活**的```神+45,巨+30,强+15``` 【数竞】C类,**cd=1**|
| SJK | 130 | $i$ | 神 |```5外教师```| 免疫**劝人选文** |
| An | 125 | 5 | 巨 |```5教师```| 【An】```对所有敌对武将加伤 中20% 弱50%```**特别的**,当为强时```加伤弱20%```,为中弱时**失去加伤**|
| Office | 100 | 6 | 弱 |```5教师```| 【CTMO】**第一回合**前```在场上任意位置设立OFFICE,可将视域内一名敌对武将移动到OFFICE```**cd=2**,**全局限3次**|
| Drrra | 130 | 3 | 巨 | 5 | **速度×2**【足球】可将**一名** $r=1$ 处武将```踢到两将连线延长线最远处```,或 $r=0$ 处武将```踢到任意方向最远处```**发动技能失去速度×2**|
| 郑阁 | 100 | 0 | 巨 |```其他班学生```|【足球】同Drrra 【医疗】对雌性武将使用```强/超极值点+45,弱极值点+30,非极值点+15```**全局限3次**|
| 明月 | 105 | 7 | 强 |```其他班学生```|【医疗】**拟修改**```对选生物的武将+30,其他+15```**全局限3次**|
| Yangtze | 115 | 8 | 强 | 6 |【转科】极值+1,数学-1,进行如下操作```1.抢夺2步内敌方武将的武器```；2.瞬移```**在数学为弱时不可发动该技能！** 【盗窃】与2步内敌方武将交换武器**cd=1,手里无武器时不可发动该技能！**|
| 142 | 110 | 6 | 中 | 6 |【Fake极值】主动技,极值+4,Hp-30 【Fake数学】锁定技,数学+3,具有C类数竞,被第一次**劝人选文**后失去该技能,屏蔽其他影响| 
|...|...|...|...|...|...|
#### 6.2 武器参数表
|步数|0|1|2|3|4|5|6及6+|溅射1|溅射 $\sqrt{2}$ |经济(开火时)|经济(制备时)|
|---|---|---|---|---|---|---|---|---|---|---|---|
|M202|50|35|30|25|25|20|15|10|7|2|2|
|RPG|30|25|25|20|20|15|10|5|3|1|1|
|加特林|40|35|20|20|15|10|10|0|0|0|2|
#### 6.3 偏移倍数表
|步数|0|1|2|3|4|5|6及6+|
|---|---|---|---|---|---|---|---|
|倍数|5|5|4|4|3|3|2.5|

偏移计算公式： $\text{伤害 = 偏移倍数} \times \Delta \text{极值}$
示例：581在2步处偏移YL：
 $\text{伤害} = 4 \times (11-0) = 44$

#### 6.4 数竞类型表
|敌人数学属性|神|巨|强|中|弱|
|---|---|---|---|---|---|
|A类：LSY|-0|-5|-15|-25|-35|
|B类：LYJ|-0|-0|-10|-20|-30|
|C类：花花|-0|-0|-5|-15|-25|
|Al只因翔's 误导|-10|-20|-30|-0|-0|

### 七 游戏用语对照表
|游戏社群黑话|原来的名词或解释|
|---|---|
|极值点|可能指代有【偏移】技能的武将，也可能指代“经济”|
|弹药/**G**|一般指代“经济”|
|主战场/正面战场|一般指代“中央区”|
|...|...|

-----

### 地图代码
本部分仅用于AI理解地图。
```python
import matplotlib.pyplot as plt

# 创建10x10的点阵
def create_grid():
    fig, ax = plt.subplots(figsize=(12,12))
    ax.set_xlim(0, 11)
    ax.set_ylim(0, 11)
    ax.set_aspect('equal')
    ax.axis('off')
    
    points = {}
    counter = 1
    
    for y in range(9, -1, -1):  # 从上到下
        for x in range(1, 11):   # 从左到右
            if counter == 10 or counter == 91:  # 跳过编号10和91的点
                counter += 1
                continue
            points[counter] = (x, y+1)  # y+1是为了让点从1开始而不是0
            ax.plot(x, y+1, 'ko', markersize=8)
            ax.text(x, y+1+0.15, str(counter), ha='center', va='center', fontsize=8)
            counter += 1
    
    return fig, ax, points

# 连接两点的方法
def connect_points(ax, points, x, y, color='red'):
    if x not in points or y not in points:
        print(f"错误：点{x}或点{y}不存在！")
        return
    
    x_coords, y_coords = zip(points[x], points[y])
    ax.plot(x_coords, y_coords, color=color, linewidth=2)

def mark_points(ax, points, point_numbers, color='green', size=12):
    """
    在指定编号的点上添加彩色方框标记
    参数:
        ax: matplotlib的axes对象
        points: 存储点位置的字典
        point_numbers: 要标记的点编号列表
        color: 颜色 ('green' 或 'purple')
        size: 方框大小
    """
    if color not in ['green', 'purple']:
        color = 'green'  # 默认绿色
    
    for num in point_numbers:
        if num in points:
            x, y = points[num]
            # 绘制方框（使用矩形补丁）
            rect = plt.Rectangle((x-0.2, y-0.2), 0.4, 0.4, 
                                linewidth=2, edgecolor=color, 
                                facecolor='none', zorder=10)
            ax.add_patch(rect)
        else:
            print(f"警告: 点 {num} 不存在，跳过标记")

# 创建点阵
fig, ax, points = create_grid()

# 一般区域
s_n = [12,13,14,15,22,32,42,16,17,18,19,12,16,26,37,47,52,53,64,65,52,62,72,82,66,67,58,59,57,67,76,86,82,63,42,23,24,28,27,86,67,68]
e_n = [42,43,34,35,25,34,44,36,37,48,49,15,19,29,39,49,82,83,84,85,54,64,75,85,86,87,88,89,59,69,79,89,73,74,33,34,15,19,38,77,78,59]

# 中央区域
s_c = [34,44,54,64,34,35,36,37]
e_c = [37,47,57,67,64,65,66,67]

# 铁道区域
s_r = [1,1,20,1,16,9,20,41,100,100,92,59,81,81,82,85]
e_r = [9,81,9,12,6,19,19,42,20,89,100,60,92,82,92,95]

for i in range(0,len(s_n)):
    connect_points(ax,points,s_n[i],e_n[i],color='black')

for i in range(0,len(s_c)):
    connect_points(ax,points,s_c[i],e_c[i],color='blue')

for i in range(0,len(s_r)):
    connect_points(ax,points,s_r[i],e_r[i],color='red')

# 标记绿色方框的点（经济区）
mark_points(ax, points, [23, 78], color='green')

# 标记紫色方框的点（塔）
mark_points(ax, points, [19,49,52,82], color='purple')

plt.title('Map of Campus\' Glory')
plt.tight_layout()
plt.show()

```
